<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–¢–µ—Å—Ç-20 ‚Äî –ü–µ—Ä–≤–∞—è –ø–æ–º–æ—â—å</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="text-gray-900" style="background:linear-gradient(180deg,#f8fafc,#fff)">
  <div class="max-w-6xl mx-auto p-6">
    <header class="mb-6">
      <h1 class="text-3xl font-bold">üìù –¢–µ—Å—Ç ‚Äî 20 –≤–æ–ø—Ä–æ—Å–æ–≤</h1>
      <p class="text-slate-600">–û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞–∂–º–∏ ¬´–ü—Ä–æ–≤–µ—Ä–∏—Ç—å¬ª, –∑–∞—Ç–µ–º ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —Ä–µ–π—Ç–∏–Ω–≥¬ª.</p>
      <nav class="mt-3 flex flex-wrap gap-2 text-sm">
        <a class="px-3 py-1 border rounded-xl" href="./index.html">üè† –†–µ–π—Ç–∏–Ω–≥</a>
        <a class="px-3 py-1 border rounded-xl" href="./theory.html">üìò –¢–µ–æ—Ä–∏—è</a>
        <a class="px-3 py-1 border rounded-xl" href="./examples.html">üß© 10 –ø—Ä–∏–º–µ—Ä–æ–≤</a>
      </nav>
    </header>

    <div class="rounded-2xl border bg-white p-4 mb-4 flex items-center justify-between">
      <div class="text-sm">‚è± –í—Ä–µ–º—è –∏–¥—ë—Ç: <span id="timer" class="font-semibold">0</span> c</div>
      <div class="text-sm">–í–µ—Ä–Ω—ã—Ö —Å–µ–π—á–∞—Å: <span id="okNow" class="font-semibold">0</span> / 20</div>
    </div>

    <section id="quiz" class="space-y-4">
      
    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">1. –û—Ü–µ–Ω–∫–∞ –¥—ã—Ö–∞–Ω–∏—è —É –±–µ–∑ —Å–æ–∑–Ω–∞–Ω–∏—è –¥–ª–∏—Ç—Å—è‚Ä¶</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="0" data-idx="0">–¥–æ 5 —Å–µ–∫</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="0" data-idx="1">–¥–æ 10 —Å–µ–∫</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="0" data-idx="2">–¥–æ 20 —Å–µ–∫</button></div>
      <div id="res0" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">2. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –æ—Å–º–æ—Ç—Ä–∞ –ø–æ –†–ö–ö:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="1" data-idx="0">–°–æ–∑–Ω–∞–Ω–∏–µ‚Üí–¥—ã—Ö–∞–Ω–∏–µ‚Üí–∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–µ</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="1" data-idx="1">–ö—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–µ‚Üí—Å–æ–∑–Ω–∞–Ω–∏–µ‚Üí–¥—ã—Ö–∞–Ω–∏–µ</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="1" data-idx="2">–î—ã—Ö–∞–Ω–∏–µ‚Üí—Å–æ–∑–Ω–∞–Ω–∏–µ‚Üí–∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–µ</button></div>
      <div id="res1" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">3. –ü–µ—Ä–≤–æ–µ –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–∏:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="2" data-idx="0">–ñ–≥—É—Ç –Ω–∏–∂–µ</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="2" data-idx="1">–î–∞–≤—è—â–∞—è –ø–æ–≤—è–∑–∫–∞/–ø—Ä—è–º–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="2" data-idx="2">–ü—Ä–æ–º—ã—Ç—å –≤–æ–¥–æ–π</button></div>
      <div id="res2" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">4. –ñ–≥—É—Ç –Ω–∞–∫–ª–∞–¥—ã–≤–∞—é—Ç:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="3" data-idx="0">–ù–∏–∂–µ</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="3" data-idx="1">–í—ã—à–µ</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="3" data-idx="2">–ù–∞ —Ä–∞–Ω—É</button></div>
      <div id="res3" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">5. –í—Ä–µ–º—è –∂–≥—É—Ç–∞:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="4" data-idx="0">–ù–µ –Ω—É–∂–Ω–æ</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="4" data-idx="1">–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏ –æ–∑–≤—É—á–∏—Ç—å</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="4" data-idx="2">–¢–æ–ª—å–∫–æ –ø–æ –ø—Ä–æ—Å—å–±–µ</button></div>
      <div id="res4" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">6. –ò–Ω–æ—Ä–æ–¥–Ω–æ–µ —Ç–µ–ª–æ –≤ —Ä–∞–Ω–µ:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="5" data-idx="0">–ò–∑–≤–ª–µ—á—å</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="5" data-idx="1">–ù–µ –∏–∑–≤–ª–µ–∫–∞—Ç—å, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤–æ–∫—Ä—É–≥</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="5" data-idx="2">–£–≥–ª—É–±–∏—Ç—å</button></div>
      <div id="res5" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">7. –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏ —É–¥—É—à—å–µ:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="6" data-idx="0">5 —É–¥–∞—Ä–æ–≤‚Üí5 –ì–µ–π–º–ª–∏—Ö–∞</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="6" data-idx="1">–°—Ä–∞–∑—É –°–õ–†</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="6" data-idx="2">–î–∞—Ç—å –≤–æ–¥—ã</button></div>
      <div id="res6" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">8. –ë–µ–∑ —Å–æ–∑–Ω–∞–Ω–∏—è —Å –¥—ã—Ö–∞–Ω–∏–µ–º:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="7" data-idx="0">–ë–æ–∫–æ–≤–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="7" data-idx="1">–ü–æ—Å–∞–¥–∏—Ç—å</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="7" data-idx="2">–ù–∞ —Å–ø–∏–Ω–µ</button></div>
      <div id="res7" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">9. –û—Ü–µ–Ω–∫–∞ –¥—ã—Ö–∞–Ω–∏—è –¥–ª–∏—Ç—Å—è:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="8" data-idx="0">–¥–æ 10 —Å–µ–∫</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="8" data-idx="1">–¥–æ 30 —Å–µ–∫</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="8" data-idx="2">—Å–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ</button></div>
      <div id="res8" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">10. –°–õ–† (–≤–∑—Ä–æ—Å–ª—ã–π) —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="9" data-idx="0">15:2</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="9" data-idx="1">30:2</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="9" data-idx="2">50:5</button></div>
      <div id="res9" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">11. –ß–∞—Å—Ç–æ—Ç–∞ –∫–æ–º–ø—Ä–µ—Å—Å–∏–π:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="10" data-idx="0">60‚Äì80/–º–∏–Ω</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="10" data-idx="1">100‚Äì120/–º–∏–Ω</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="10" data-idx="2">140‚Äì160/–º–∏–Ω</button></div>
      <div id="res10" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">12. –ì–ª—É–±–∏–Ω–∞ –∫–æ–º–ø—Ä–µ—Å—Å–∏–π:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="11" data-idx="0">3‚Äì4 —Å–º</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="11" data-idx="1">5‚Äì6 —Å–º</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="11" data-idx="2">7‚Äì8 —Å–º</button></div>
      <div id="res11" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">13. –ù–æ—Å–æ–≤–æ–µ –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–µ ‚Äî –ø–æ–ª–æ–∂–µ–Ω–∏–µ –≥–æ–ª–æ–≤—ã:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="12" data-idx="0">–ù–∞–∑–∞–¥</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="12" data-idx="1">–í–ø–µ—Ä—ë–¥</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="12" data-idx="2">–õ–µ—á—å</button></div>
      <div id="res12" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">14. –û–∂–æ–≥ ‚Äî –ø–µ—Ä–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="13" data-idx="0">–û—Ö–ª–∞–∂–¥–µ–Ω–∏–µ 10‚Äì15 –º–∏–Ω</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="13" data-idx="1">–ö—Ä–µ–º</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="13" data-idx="2">–õ—ë–¥</button></div>
      <div id="res13" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">15. –°—É–¥–æ—Ä–æ–≥–∏ ‚Äî –Ω–µ–ª—å–∑—è:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="14" data-idx="0">–í—Å—Ç–∞–≤–ª—è—Ç—å –ø—Ä–µ–¥–º–µ—Ç –≤ —Ä–æ—Ç</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="14" data-idx="1">–£–±—Ä–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã –≤–æ–∫—Ä—É–≥</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="14" data-idx="2">–ü–æ–¥ –≥–æ–ª–æ–≤—É –º—è–≥–∫–æ–µ</button></div>
      <div id="res14" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">16. –ü–æ—Å–ª–µ —Å—É–¥–æ—Ä–æ–≥ (–¥—ã—Ö–∞–Ω–∏–µ –µ—Å—Ç—å):</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="15" data-idx="0">–ë–æ–∫–æ–≤–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="15" data-idx="1">–ù–∞ —Å–ø–∏–Ω–µ</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="15" data-idx="2">–ü–æ—Å–∞–¥–∏—Ç—å</button></div>
      <div id="res15" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">17. –ê–Ω–∞—Ñ–∏–ª–∞–∫—Å–∏—è ‚Äî –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="16" data-idx="0">–î–∞—Ç—å –≤–æ–¥—ã</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="16" data-idx="1">112/103, –∞–¥—Ä–µ–Ω–∞–ª–∏–Ω-–∞–≤—Ç–æ–∏–Ω—ä–µ–∫—Ç–æ—Ä</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="16" data-idx="2">–ñ–¥–∞—Ç—å</button></div>
      <div id="res16" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">18. –°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –ø–æ–º–æ—â—å (–∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π):</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="17" data-idx="0">–í–∞–º –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å?</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="17" data-idx="1">–í—ã –∫—Ç–æ?</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="17" data-idx="2">–ì–¥–µ –±–æ–ª–∏—Ç?</button></div>
      <div id="res17" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">19. –ë–µ–∑ —Å–æ–∑–Ω–∞–Ω–∏—è ‚Äî —Å–æ–≥–ª–∞—Å–∏–µ:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="18" data-idx="0">–†–∞—Å–ø–∏—Å–∫–∞</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="18" data-idx="1">–ü–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="18" data-idx="2">–°–ø—Ä–æ—Å–∏—Ç—å —É –¥—Ä—É–∑–µ–π</button></div>
      <div id="res18" class="mt-2 text-sm opacity-70"></div>
    </div>

    <div class="rounded-2xl border bg-white p-4">
      <div class="font-medium mb-2">20. –ó–≤–æ–Ω–æ–∫ 112 ‚Äî –Ω–∞–∑–≤–∞—Ç—å:</div>
      <div class="grid md:grid-cols-3 gap-2"><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="19" data-idx="0">–¢–æ–ª—å–∫–æ –∞–¥—Ä–µ—Å</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="19" data-idx="1">–ö—Ç–æ, —á—Ç–æ, –≥–¥–µ, —Å–∫–æ–ª—å–∫–æ –ø–æ—Å—Ç—Ä–∞–¥–∞–≤—à–∏—Ö, —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ–Ω—Ç–∞–∫—Ç</button><button class="ans border rounded-xl px-3 py-2 text-left hover:bg-gray-50" data-q="19" data-idx="2">–¢–æ–ª—å–∫–æ —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ</button></div>
      <div id="res19" class="mt-2 text-sm opacity-70"></div>
    </div>
    </section>

    <div class="mt-4 flex flex-wrap gap-3">
      <button id="check" class="px-4 py-2 rounded-xl bg-black text-white">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <button id="send" class="px-4 py-2 rounded-xl border">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —Ä–µ–π—Ç–∏–Ω–≥</button>
      <button id="reset" class="px-4 py-2 rounded-xl border">–°–±—Ä–æ—Å–∏—Ç—å</button>
      <div id="score" class="text-sm opacity-70 self-center"></div>
      <div id="sendStatus" class="text-sm opacity-70 self-center"></div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
    import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js";
    import { getFirestore, serverTimestamp, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";
    const firebaseConfig = {"apiKey": "AIzaSyCj3uUUqGKZ2CalH-v3So6OjU_-eZH7tUc", "authDomain": "pp10-79133.firebaseapp.com", "projectId": "pp10-79133", "storageBucket": "pp10-79133.firebasestorage.app", "messagingSenderId": "179048880378", "appId": "1:179048880378:web:0510340ddfb5f639b01143", "measurementId": "G-QCX9BD9KY2"};
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    await signInAnonymously(auth);
    const db = getFirestore(app);

    // –ü—Ä–æ—Ñ–∏–ª—å
    const PROFILE_KEY = "rating_profile_v1";
    const profile = JSON.parse(localStorage.getItem(PROFILE_KEY) || "{}");

    // –¢–∞–π–º–µ—Ä
    let startTs = performance.now();
    let elapsed = 0;
    setInterval(()=>{
      elapsed = Math.round((performance.now()-startTs)/1000);
      document.getElementById('timer').textContent = elapsed;
    },1000);

    const correct = [1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1];
    const answers = Array(correct.length).fill(null);
    const resEls = correct.map((_,i)=>document.getElementById('res'+i));
    document.querySelectorAll('.ans').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const qi=+btn.dataset.q, oi=+btn.dataset.idx;
        answers[qi]=oi;
        [...btn.parentElement.children].forEach(b=>b.classList.remove('border-black'));
        btn.classList.add('border-black');
        // quick count
        let ok=0; answers.forEach((a,i)=>{ if(a===correct[i]) ok++; });
        document.getElementById('okNow').textContent = ok;
      });
    });

    let lastScore = 0;
    document.getElementById('check').onclick = ()=>{
      let ok=0;
      answers.forEach((a,i)=>{
        if(a===correct[i]) ok++;
        resEls[i].textContent = '–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ' + String.fromCharCode(65+correct[i]);
      });
      lastScore = ok;
      document.getElementById('score').textContent = '–ò—Ç–æ–≥: ' + ok + ' / ' + correct.length;
    };

    document.getElementById('reset').onclick = ()=>window.location.reload();

    document.getElementById('send').onclick = async ()=>{
      if (!profile || !profile.name) { alert('–°–Ω–∞—á–∞–ª–∞ —É–∫–∞–∂–∏ –∏–º—è/–∫–æ–º–∞–Ω–¥—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ (index.html) ‚Äî –∫–Ω–æ–ø–∫–∞ ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å¬ª.'); return; }
      const durationMs = Math.round((performance.now()-startTs));
      const points = lastScore*3 + (elapsed<=120 ? 5:0);
      document.getElementById('sendStatus').textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';
      try {
        await addDoc(collection(db,'attempts'), {
          name: profile.name,
          team: profile.team || '',
          points,
          correct: lastScore,
          total: correct.length,
          durationMs,
          createdAt: serverTimestamp()
        });
        document.getElementById('sendStatus').textContent = '‚úî –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —Ä–µ–π—Ç–∏–Ω–≥.';
      } catch(e) {
        console.error(e);
        document.getElementById('sendStatus').textContent = '‚ö† –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏.';
      }
    };
  </script>
</body>
</html>
